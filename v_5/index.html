<!doctype html>
<html>
<head>
    <title>FusionCharts Dev Samples</title>
    <link href="main.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="lib.js"></script>
    <script type="text/javascript" src="data.js"></script>
    <script type="text/javascript">
    function addDataButtons() {
        var container = document.getElementById("table_add"),
            i;
        for (i in dataStore) {
            container.innerHTML += "&nbsp;&nbsp;<span onclick='addTableData(\"" + i + "\")' id='add_table_data_" + i + "' class='add_table__data_botton_class'>Add to Table \"" + i + "\"</span>";
        }
    }

    var convertNumberToWord = (function(number) {
        if(number<100) {
            return number;
        }
        var word = "";
        var tempData = number.toString();

        if(tempData.length<9) {
            var zero = "";
            for(var index=0;index<(9-tempData.length); index++) {
                zero += "0";
            }
            tempData = zero+tempData;
        }
        word = (((tempData[tempData.length-7]!="0")?tempData[tempData.length-7]:"")+((tempData[tempData.length-6]!="0")?tempData[tempData.length-6]:((tempData[tempData.length-7]!=0)?tempData[tempData.length-6]:""))+((tempData[tempData.length-7]!=0||tempData[tempData.length-6]!=0)?" Lakh ":""))+ ((tempData[tempData.length-5]!="0"?tempData[tempData.length-5]:"")+(tempData[tempData.length-4]!="0"?tempData[tempData.length-4]:(tempData[tempData.length-5]!="0"?tempData[tempData.length-4]:""))+((tempData[tempData.length-5]!="0"||tempData[tempData.length-4]!="0")?" Thousand ":"")) + ((tempData[tempData.length-3]!="0")?(tempData[tempData.length-3] + " Hundred "):"") +  ((tempData[tempData.length-2]!="0"?tempData[tempData.length-2]:"")+((tempData[tempData.length-1]!="0")?tempData[tempData.length-1]:((tempData[tempData.length-2]!="0")?tempData[tempData.length-1]:"")));
        var flag = 0;
        for(var index=0;index<=tempData.length-8;index++) {
            if(tempData[index]!="0") {
                word = tempData.slice(index, tempData.length-7)+" Crore " + word;
                break;
            }
        }
        return word+"  ("+number+") ";
    });
    function addTableData(name) {
        generateData(parseInt(document.getElementById("numrow").value, 10), dataStore[name])
        if(document.getElementById("dataLength_"+name)) {
            displayContent(name);
        }
    }

    var operationArray = [{
        name: "sort"
    }, {
        name: "search"
    }, {
        name: "serialize"
    }];
    
    </script>
</head>

<body>
    <div></div>
    
    <div>
       
    </div>
    <div id="div_tab">
        <div id="div_listOfTable"></div>
        <div id="div_info"></div>
    </div>
    <br/>
    <br/>
    <div>Number of rows
        <input type="text" id="numrow" value="10000">
    </div>
    <div id="table_add"></div>
    <div id="table_operations">
        Select the operation first
        <div id="div_operationList"></div>
        <button disabled="true" title="click here to run selected operation">Run</button>
    </div>

    <script type="text/javascript">
    addDataButtons();
    </script>
    <script type="text/javascript">
    var displayContent = (function(tabIndex) {
        var tabElements = document.getElementsByClassName('tab');
        for(var index=0;index<tabElements.length; index++) {
            if(typeof tabElements[index].className!="undefined" && tabElements[index].className.indexOf('active')!=-1) {
                tabElements[index].className = "tab";
            }
            if(tabElements[index].innerHTML == tabIndex) {
                tabElements[index].className = "tab active";   
            }
        }
        var displayInfo = "";
        displayInfo += "<table border='1'><tr><th>Table Name</th><th>Number of Data</th><th>Fields(type)</th></tr>";
        displayInfo += "<tr><td>"+tabIndex+"</td><td id='dataLength_"+tabIndex+"'>"+ convertNumberToWord(dataStore[tabIndex].data.length) + "</td><td>";
        for(var index2 in dataStore[tabIndex].fields) {
            displayInfo += (parseInt(index2)+1)+">"+dataStore[tabIndex].fields[index2].name+"("+((dataStore[tabIndex].data[0])?typeof dataStore[tabIndex].data[0][index2]:"undefined type")+"), ";
        }
        displayInfo = displayInfo.substring(0, displayInfo.length - 1);
        displayInfo += "</td></tr></table>";
        document.getElementById("div_info").innerHTML = displayInfo;
    });
    (function() {
        // populate the tab based on number of tabs
        var tabHTML = "";
        for(var tableIndex in dataStore) {
            tabHTML += "<div onclick='displayContent(\""+tableIndex+"\")' class='tab'>"+tableIndex+"</div>";
        }
        document.getElementById("div_listOfTable").innerHTML = tabHTML;
        document.getElementsByClassName('tab')[0].click();
    })();
    (function() {
        var html = ""
        for(var index in operationArray) {
            html+="<button>"+operationArray[index].name+"</button>";
        }
        document.getElementById("div_operationList").innerHTML = html;
    })();
    </script>
</body>

</html>